%\section{Introduction}
%\label{sec:intro}
% \textbf{The introduction formula \url{https://blogs.ubc.ca/khead/research/research-advice/formula}.}
%\textbf{Hook:}
Economists use natural experiments to credibly answer social questions, when an experiment was infeasible.
For example, does winning access to health insurance causally improve health and well-being \citep{finkelstein2008oregon}?
Natural experiments are settings which answer these questions, but give little indication of how these effects came about.
Causal Mediation (CM) aims to estimate the mechanisms behind causal effects, by estimating how much of the treatment effect operates through a proposed mediator mechanism.
For example, do causal gains from winning access to health insurance come mostly from physical use of healthcare, or plausible psychological gains from no longer having to worry about being uninsured?
This study of mechanisms behind causal effects broadens the economic understanding of social settings studied with natural experiments.
This paper shows that the conventional approach to estimating CM effects is inappropriate in a natural experiment setting, provides a theoretical framework for how bias operates, and develops an approach to correctly estimate CM effects under alternative assumptions.
These methods contrast the current practice in applied economics of providing suggestive evidence of mechanisms, which gives necessary but not sufficient conditions for the mechanisms behind a treatment effect.

In other disciplines --- particularly epidemiology, psychology, and medicine --- CM has become a standard empirical framework for decomposing causal effects into direct and indirect components \citep{imai2010identification}.
I refer to established approach as ``conventional CM,'' which assumes both the treatment and the mediator are (quasi-)randomly assigned.
Applied economics has not typically adopted conventional CM in this formal sense, because mediators in economic applications --- such as schooling, labour supply, or healthcare use --- are choice variables shaped by costs and benefits, likely violating this assumption.
Nevertheless, economists often pursue the same goal informally: they assess whether a treatment effect remains after controlling for a plausible mediator mechanism, or they present descriptive evidence on the channels through which effects operate.
These analyses are effectively conventional CM conducted without acknowledging its identifying assumptions, which makes it important to understand how those assumptions break down in the economic settings where they are used.

%\textbf{Question:}
This paper starts by considering how conventional CM methods (whether applied explicitly or implicitly) perform in a natural experiment setting.
Conventional CM methods rely on assuming the initial treatment, and the subsequent mediator mechanism, are both quasi-randomly assigned \citep{imai2010identification}.
Assuming the mediator is as-good-as-randomly assigned requires either (1) selection is fully captured by observabed control variables, or (2) decisions are effectively random.
While these assumptions can be plausible when a mediator is directly manipulated, or the data include extremely rich control variables, they are not credible in most economic applications; when take-up decisions reflect individual costs and benefits, mediator assignment is inherently non-random.
For example, in the Oregon Health Insurance Experiment, those who got off the wait-list were randomly chosen by a lottery, but made the choice to visit healthcare in the following year of their own free will; this choice considered their own individual costs and benefits, and thus was not a random assignment.
I formally derive the selection bias that arises from this non-random assignment, and show through simulations that these biases can be large in settings consistent with standard economic models of selection.
This result explains why conventional CM methods can yield misleading conclusions in applied economics, and motivates the need for a framework consistent with quasi-experimental causal reasoning.

Conventional CM's identifying assumptions are at odds with selection based on costs and benefits, so I import methods grounded in labour economic theory to solve the identification problem.
This approach identifies CM effects via the Marginal Treatment Effect (MTE) of the mediator, and requires three main assumptions.
(1) Mediator take-up must respond only positively to the initial treatment (monotonicity), which implies mediator selection follows a selection model.
(2) Mediator take-up is motivated by mediator benefits.
(3) A valid instrument for mediator take-up must exist, to avoid relying on parametric assumptions on unobserved selection.
While these assumptions are strong, they are plausible in many applied settings.
Mediator monotonicity aligns with conventional theories for selection-into-treatment, and is accepted widely in many applications using an instrumental variables research design.
Selection based on costs and benefits is central to economic theory, and is the dominant concern for judging observational designs that identify causal effects.
Access to valid instrumental variation is a strong condition, though is important to avoid further modelling assumptions; the most compelling example is using variation in mediator take-up costs as an instrument.

Applying the new methods to the Oregon Health Insurance Experiment shows that unobserved selection matters in an analysis of a real-world natural experiment.
A substantial portion of the wait-list lottery's impact on subjective health and well-being is mediated indirectly through extra healthcare usage, after instrumenting for healthcare usage with respondents' usual provider.
A conventional CM analysis would put this indirect mediated share at practically zero, so that my methods expose that negative selection into healthcare usage would be hiding evidence for this mechanism.
These estimates give sufficient evidence that extra healthcare use mediates a sizeable share of the Medicaid-lottery's benefits, though wider confidence intervals underscore the inherent uncertainty on the proportion of the effect operating through the single mediator mechanism of healthcare usage.

The methods I propose for CM analyses are not perfect for every setting: the structural assumptions are strong, and are tailored to selection-into-mediator based on the economic principle of selection based on costs and benefits.
Indeed, this approach provides no safe harbour for estimating CM effects if these structural assumptions do not hold true.
This approach imports insights from the instrumental variables literature, connecting the conventional \cite{imai2010identification} approach to CM with the economics literature on selection-into-treatment and MTEs \citep{vytlacil2002independence,heckman2004using,heckman2005structural,florens2008identification,brinch2017beyond,kline2019heckits}.

Applied economists mostly investigate mediating mechanisms for causal effects with suggestive analyses of mechanisms.
These descriptive analyses are informative, but do not generally identify a mediating pathway without additional assumptions --- see also \citet{blackwell2024assumption,green2010enough}.
A new strand of the econometric literature has arisen in implicit acknowledgement that suggestive evidence of mechanisms, or a conventional approach to CM, can lead to biased inference and needs alternative methods for credible inference.
These include identifying CM effects with overlapping quasi-experimental research designs \citep{deuchert2019direct,frolich2017direct}, functional form restrictions \citep{heckman2015econometric,heckman2013understanding}, partial identification \citep{flores2009identification}, or an hypothesis test of full mediation through observed channels \citep{kwon2024testing} --- see \cite{huber2019review} for an overview.\footnote{
    An alternative method to estimate CM effects is ensuring treatment and mediator quasi-random assignment holds by a running two randomised controlled trials for both treatment and mediator, at the same time.
    This set-up has been considered in the literature previously, in theory \citep{imai2013experimental} and in practice \citep{ludwig2011mechanism}.
}

I develop a framework showing exactly how selection bias contaminates conventional CM estimates when mediator choices are driven by unobserved gains --- settings where none of the existing econometric approaches to CM directly apply.
The recent econometric literature has made important progress in adapting CM to observational settings;
my work builds on this literature by addressing the common case in which the mediator is not quasi-randomly assigned, when selection into a mediator mechanism aligns with economic theory for selection.
\cite{frolich2017direct} is the most similar paper to mine, though I extend the framework for CM from an economic perspective in multiple ways.
First, by linking CM to the MTE literature for a binary mediator, I identify average CM effects rather than complier-specific effects (and provide a different estimation approach).
Second, I show formally how unobserved selection biases conventional CM estimates and propose an alternative identification strategy that retains the natural experiment structure while relaxing mediator ignorability.
Last, this paper provides a rigorous warning to applied economists against uncritically importing conventional CM methods to avoid selection biases term derived, and clarifies the conditions and practices to avoid them.

%\textbf{Road-map:}
This paper proceeds as follows.
\autoref{sec:lottery} describes the dominant approach in economics for studying mechanisms behind treatment effects, illustrating with data from the Oregon Health Insurance Experiment.
% and surveys economic research.
\autoref{sec:mediation} introduces the formal framework for CM, and develops expressions for bias in conventional CM estimates in natural experiment and observational settings.
\autoref{sec:applied} describes this bias in applied settings with (1) a regression framework, (2) a setting with selection based on costs and benefits.
\autoref{sec:selectionmodel} purges bias from CM estimates by identifying CM effects via an MTE approach.
\autoref{sec:controlfun} demonstrates how to estimate CM effects with this approach, with either parametric or semi-parametric methods, and gives simulation evidence.
\autoref{sec:oregon} returns to the Oregon Health Insurance Experiment, providing credible estimates of effects on subjective health and well-being mediated through increased healthcare usage.
\autoref{sec:conclusion} concludes.
